---
import MainLayout from '../layouts/MainLayout.astro';
import '../styles/global.css';

import type { MarkdownInstance } from 'astro';
import type { Frontmatter } from '../frontmatter';
import PostCard from '../components/PostCard.astro';

// Blog posts
const posts = Object.values(import.meta.glob<MarkdownInstance<Frontmatter>>('./posts/*.md', { eager: true }))
---

<MainLayout pageTitle="James Harris">
	<div class="mx-auto w-fit px-4 relative">
		<hr class="border border-sky-700 absolute top-16 left-7 right-4 hidden sm:block" />
		<div class="grid grid-cols-1 sm:grid-cols-[minmax(200px,300px)_auto] gap-6 max-w-3xl">
			<h1 class="text-4xl mt-4">James Harris</h1>
			<h2 class="text-2xl mt-4 flex-col justify-end hidden sm:flex">Blog posts</h2>
			<div class="flex flex-col min-w-0">
				<a href="/periodic">
					<img src="/img/ptos-preview.png" alt="Periodic Table of Storytelling" class="mb-2 max-w-full" />
					<!-- <h2 class="text-2xl underline">Periodic Table of Storytelling</h2> -->
				</a>
				<section class="mb-4">
					<h2 class="text-2xl">Guides</h2>
					<ul>
						<li><a href="">ğŸ’¾ Cheap, effortless backups</a></li>
						<li><a href="">ğŸ” File syncing</a></li>
						<li><a href="">ğŸ” Password vault</a></li>
						<li><a href="">ğŸª Blocking cookie banners</a></li>
					</ul>
				</section>
				<section class="mb-4">
					<h2 class="text-2xl">Tools</h2>
					<ul>
						<li><a href="">ğŸ–¼ï¸ Batch vision</a></li>
						<li><a href="">ğŸ‘¥ Name generator</a></li>
						<li><a href="">ğŸ¨ VSCode Theme</a></li>
					</ul>
				</section>
				<section class="mb-4">
					<h2 class="text-2xl">Blogroll</h2>
					<ul>
						<li><a href="https://simonwillison.net/">
							<img class="w-4 h-4 inline-block" src="https://simonwillison.net/favicon.ico" alt=""/>
							Simon Willison
						</a></li>
						<li><a href="https://ncase.me/">
							<img class="w-4 h-4 inline-block" src="https://ncase.me/favicon.png" alt=""/>
							Nicky Case</a></li>
						<li><a href="https://www.astralcodexten.com/">
							<img class="w-4 h-4 inline-block" src="https://www.astralcodexten.com/favicon.ico" alt=""/>
							Scott Alexander
						</a></li>
					</ul>
				</section>
			</div>
			<section class="flex flex-col min-w-64" >
				<h2 class="text-2xl mb-4 sm:hidden">Blog posts</h2>
				<ul class="perspective-distant">
					<div class="animate-blow">
						<PostCard post={posts[0]} />
					</div>
					{ posts.map((post) => <li class="animate-blow"><a href={post.url}><PostCard post={post}/></a></li>)}
				</ul>
			</section>
		</div>
	</div>
</MainLayout>

<style>
	.animate-blow {
		animation-name: blow;
		animation-duration: 2s;
		animation-timing-function: ease-in-out;
		animation-iteration-count: infinite;
		transform-origin: left center;
		transform-style: preserve-3d;
	}

	@keyframes blow {
		0%, 100% {
			transform: rotateY(0deg) scaleX(100%);
		}
		25% {
			transform: rotateY(7deg) scaleX(97%);
		}
		50% {
			transform: rotateY(0deg) scaleX(100%);
		}
		75% {
			transform: rotateY(-7deg) scaleX(98%);
		}
	}
</style>